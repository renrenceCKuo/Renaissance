<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>遊於藝～文藝復興在中正</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f7f5f0; /* Parchment color */
            color: #292524;
        }
        h1, h2, h3, h4, .serif-font {
            font-family: 'Noto Serif TC', serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e7e5e4;
        }
        ::-webkit-scrollbar-thumb {
            background: #a8a29e;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #78716c;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Classical Frame Effect */
        .classical-frame {
            border: 8px solid #78350f; /* amber-900 like */
            border-style: ridge;
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.5), /* Inner shadow for depth */
                10px 10px 20px rgba(0,0,0,0.4); /* Outer drop shadow */
            position: relative;
            background: #fff;
        }
        .classical-frame::after {
            content: '';
            position: absolute;
            top: -4px; left: -4px; right: -4px; bottom: -4px;
            border: 1px solid #92400e; /* amber-700 */
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const Icons = {
            Menu: () => <i data-lucide="menu"></i>,
            BookOpen: () => <i data-lucide="book-open"></i>,
            Palette: () => <i data-lucide="palette"></i>,
            Church: () => <i data-lucide="church"></i>,
            Users: () => <i data-lucide="users"></i>,
            Smile: () => <i data-lucide="smile"></i>,
            HelpCircle: () => <i data-lucide="help-circle"></i>,
            ChevronRight: () => <i data-lucide="chevron-right"></i>,
            ChevronDown: () => <i data-lucide="chevron-down"></i>,
            Play: () => <i data-lucide="play-circle"></i>,
            Image: () => <i data-lucide="image"></i>,
            Glasses: () => <i data-lucide="glasses"></i>,
            Newspaper: () => <i data-lucide="newspaper"></i>,
            MessageSquare: () => <i data-lucide="message-square"></i>
        };

        // Data Structure with Placeholder Images
        const menuData = [
            {
                id: 'concept',
                title: '策展理念',
                icon: 'BookOpen',
                content: {
                    title: '光影漫入游於藝，中正迎來文藝興',
                    type: 'text',
                    image: '0.jpg',
                    body: [
                        '在校園裡，一場跨越六百年的文明對話正悄然展開。「游於藝之文藝復興——中正國中穹頂玩藝特展」以藝術為舟、科技為槳，邀請師生與社區一同穿越時空，回到人文精神甦醒的年代。展覽以「光影漫入游於藝，中正迎來文藝興」為策展主題，將文藝復興的理性、創造與人文精神，引入當代校園學習現場，讓藝術不再只是被觀看，而是被經驗、被演繹、被再創作。',
                        '一、穿越時空的蟲洞：穹頂降臨校園，學生走入美術館',
                        '策展核心以「穿越時空的蟲洞」為概念，象徵知識與想像的跨世紀連結。展場復刻西元 1436 年震撼歐洲的建築創舉——義大利佛羅倫斯的聖母百花大教堂穹頂。師生以三角形紙板結構，依循幾何與工程原理組裝穹頂，致敬布魯內萊斯基以理性與創新完成的不可能任務。',
                        '穹頂內部搭載 360 度投影，影像流轉間呈現「末日審判」的宏闊視野，觀者仰首凝望，彷彿置身翡冷翠。展區亦設置VR 體驗，學生戴上頭盔，瞬間走入巴黎羅浮宮，近距離鑑賞李奧納多・達文西的〈蒙娜麗莎的微笑〉，在虛實交織中，完成一趟跨國、跨時代的藝術巡禮。',
                        '二、虛實互動的劇場：學生從鑑賞到共創的美感之旅',
                        '「虛實學習的劇場」讓學習由被動欣賞轉為主動參與。展場重現〈最後的晚餐〉的空間情境，學生化身導覽者，帶領觀眾理解構圖、人物關係與情緒瞬間；接著，學生與觀眾分別揣摩耶穌與十二門徒的角色，展開一場即席行動劇。',
                        '演出透過 360 攝影機全程紀錄，演後立即回到穹頂劇場內觀看自己的作品——聲光包覆、影像環繞，學習者在「演—看—思」的循環中，體驗沉浸式劇場的共創樂趣。藝術在此不再是結果，而是一段被共同生成的歷程。',
                        '三、五感全開的學習：學生與大師跨世紀的心靈對話',
                        '展覽最動人的風景，來自「學生與大師的對話」。學生先以導覽與角色扮演深化理解，再回到畫布前，以自己的視角重構〈最後的晚餐〉：同樣學習透視法，卻在用色、構圖與敘事上展現各自的生命經驗與創意巧思。',
                        '另一展區則以〈蒙娜麗莎的微笑〉為起點，學生觀察表情、光影與心理層次，進而完成自畫像創作——性格、情緒與特徵被敏銳捕捉，線條與色彩交織出屬於當代少年的自我書寫。經典不再高懸牆上，而是成為啟發創作的對話者。',
                        '策展理念與教育意義',
                        '本展以「游於藝」為方法論，強調跨域整合與體驗式學習：建築幾何、影像科技、戲劇表演與美術創作彼此支撐，構成一座可進入、可演繹、可再造的學習場域。透過穹頂與投影、VR 與行動劇，學生在真實與虛擬之間反覆往返，培養觀察、理解、表達與創造的核心能力。',
                        '當光影漫入校園，文藝復興不只是歷史名詞，而成為今日教育的活水——啟動理性、滋養人文、點燃創造。中正國中以「穹頂玩藝」為橋，讓大師的精神與學生的想像在此相遇，迎來屬於校園的文藝興盛時刻。',
                        '策展人:王如杏 12.12.2025'
                    ],
                    // image: 'https://images.unsplash.com/photo-1460661419201-fd4cecdf8a8b?q=80&w=1200&auto=format&fit=crop' // Generic Art Gallery
                }
            },
            {
                id: 'guide',
                title: '名畫導覽',
                icon: 'Palette',
                content: {
                    title: '文藝復興名畫導覽',
                    type: 'gallery',
                    images: [
                        { src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project_-_edited.jpg/1200px-Sandro_Botticelli_-_La_nascita_di_Venere_-_Google_Art_Project_-_edited.jpg', desc: '維納斯的誕生 - 波提切利' },
                        { src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/11/Michelangelo_-_Creation_of_Adam_%28cropped%29.jpg/1200px-Michelangelo_-_Creation_of_Adam_%28cropped%29.jpg', desc: '創世紀 - 米開朗基羅' },
                        { src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/%22The_School_of_Athens%22_by_Raffaello_Sanzio_da_Urbino.jpg/1200px-%22The_School_of_Athens%22_by_Raffaello_Sanzio_da_Urbino.jpg', desc: '雅典學院 - 拉斐爾' }
                    ]
                }
            },
            {
                id: 'cathedral',
                title: '聖母百花大教堂',
                icon: 'Church',
                subMenus: [
                    {
                        id: 'cathedral-dome',
                        title: '聖母百花大教堂穹頂介紹',
                        content: {
                            title: '建築奇蹟：布魯內萊斯基的穹頂',
                            type: 'photo-grid-2x2',
                            body: '聖母百花大教堂的穹頂是文藝復興建築的象徵。菲利波·布魯內萊斯基在沒有鷹架的情況下，設計了這個雙層殼體結構，解決了當時建築界最大的難題。內部的壁畫《末日審判》則由瓦薩里和祖卡里繪製，氣勢滂薄。(照片提供與版權所有：王如杏校長)',
                            images: [
                                '1.jpg',
                                '2.jpg',
                                '3.jpg',
                                '4.jpg' 
                            ]
                        }
                    },
                    {
                        id: 'cathedral-theater',
                        title: '中正百花教堂穹頂劇場全紀錄',
                        content: {
                            title: '校園裡的穹頂：全紀錄',
                            type: 'video-grid',
                            items: [
                                { 
                                    title: '縮時攝影：穹頂搭建過程', 
                                    desc: '學生與老師共同合作，利用環保材質重現穹頂結構。點擊開啟新視窗播放影片。',
                                    externalLink: 'https://www.youtube.com/watch?v=y5YGka9BD6w',
                                    thumbnail: '100.JPG' // Construction placeholder
                                },
                                { 
                                    title: '沈浸式劇場體驗', 
                                    desc: '在自製的穹頂下，進行的光影投射展演。',
                                    externalLink: 'https://www.youtube.com/watch?v=w-veqSS2JbI',
                                    thumbnail: '101.JPG' // Event/Light placeholder
                                }
                            ]
                        }
                    }
                ]
            },
            {
                id: 'last-supper',
                title: '最後的晚餐',
                icon: 'Users',
                subMenus: [
                    {
                        id: 'supper-analysis',
                        title: '畫作賞析',
                        content: {
                            title: '透視法的巔峰：最後的晚餐',
                            type: 'text',
                            body: [
                                '達文西（Leonardo da Vinci）〈最後的晚餐〉',
                                '它畫在義大利米蘭的一間修道院牆上，完成於15世紀末，是文藝復興的經典傑作之一。',
                                '故事背景：',
                                '這幅畫描繪的是《聖經》裡的一幕〈耶穌在被捕之前，和十二個門徒共進最後一餐〉。就在這個時刻，耶穌說了一句話：「你們當中，有一個人要出賣我。」全場氣氛瞬間緊張起來。達文西選擇的，就是這一刻－震驚爆發的瞬間。',
                                '觀察畫面人物：',
                                '大家看，耶穌坐在中間，他的身體形成一個安靜的三角形，象徵穩定與神性。而他的兩側十二位門徒，全都反應不一，有人驚訝、有人憤怒、有人低頭沉思。',
                                '問學生：你能找出哪一位可能是「出賣他的人」嗎？',
                                '（ 學生會觀察猶大低著頭、手拿著錢袋、身體微微後退）沒錯，那就是「猶大」！他被安排在同一張桌子上，但微妙地退了一步，象徵他「表面同席、內心疏離」。',
                                '透視與構圖的魔法：',
                                '接下來，我們看整個空間。是不是覺得每個人、每條線、甚至牆壁的角度，都好整齊？這是達文西運用的 「線性透視法」。所有的透視線都指向耶穌的頭部。這樣一來，觀眾的視線自然被引導到中心，即使場面混亂，焦點依然清楚。',
                                '問學生：如果你是導演，要讓觀眾一眼看出主角，你會怎麼安排畫面？',
                                '（引導學生理解構圖與導向視線的設計）'
                            ],
                            image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/4b/%C3%9Altima_Cena_-_Da_Vinci_5.jpg/1280px-%C3%9Altima_Cena_-_Da_Vinci_5.jpg'
                        }
                    },
                    {
                        id: 'supper-plan',
                        title: '行動劇教案及教學實況',
                        content: {
                            title: '當名畫動起來：教學實況',
                            type: 'text',
                            body: [
                                '本單元結合表演藝術課，讓學生分組分析畫中人物的肢體語言。',
                                '透過「定格畫面」練習，學生必須揣摩猶大與彼得的心理狀態。'
                            ],
                            image: '401.jpg' // Classroom/Students
                        }
                    },
                    {
                        id: 'supper-students',
                        title: '學生的戲劇錄影及照片',
                        content: {
                            title: '學生演繹：誰是背叛者？',
                            type: 'video-grid',
                            items: [
                                { 
                                    title: '七年級 A 班 - 現代版最後晚餐', 
                                    desc: '將場景搬到學校食堂的創意改編。', 
                                    thumbnail: 'https://images.unsplash.com/photo-1518930259202-0e9b9d799468?q=80&w=800&auto=format&fit=crop',
                                    externalLink: 'https://www.youtube.com/' 
                                },
                                { 
                                    title: '八年級 C 班 - 經典重現', 
                                    desc: '考究的服裝與到位的表情管理。',
                                    thumbnail: 'https://images.unsplash.com/photo-1460723237483-7a6dc9d0b212?q=80&w=800&auto=format&fit=crop',
                                    externalLink: 'https://www.youtube.com/'
                                }
                            ]
                        }
                    },
                    {
                        id: 'supper-creation',
                        title: '學生再創畫作及簡介文字',
                        content: {
                            title: '最後的晚餐：創意重構',
                            type: 'gallery',
                            images: [
                                { src: '30401.png', desc: '71116 黃詩甯' },
                                { src: '30402.png', desc: '71207 謝宗翰' },
                                { src: '30403.jpg', desc: '71308 汪裕恩' },
                                { src: '30404.png', desc: '71427 李昤蒽' },
                                { src: '30405.jpg', desc: '71512 張祈惟' },
                                { src: '30406.png', desc: '71613 何善納' },
                                { src: '30407.png', desc: '71723 曾沛暄' },
                                { src: '30408.jpg', desc: '71825 鄧品彤' },
                                { src: '30409.png', desc: '72121 李尹珊' },
                                { src: '30410.jpg', desc: '72223 孫侑琦' }
                            ],
                            additionalContent: {
                                title: '學生創作理念',
                                items: [
                                    {
                                        author: '71116 黃詩甯',
                                        text: '我畫的作品裡，大家都是中心人物，因為班裡一個人都不能少，每個人都很重要，背景參考BTS Fake Love MV的背景，因為剛好符合「最後的晚餐」背景的感覺，桌上的各種美食比喻營養午餐好吃，所以這幅畫是「每天的午餐」，「每天」是還有未來的兩年多，我們還會一起享用好幾次營養午餐，有些在後面聊天的同學們笑嘻嘻的，代表著和平，不要和原作品一樣背叛他人。'
                                    },
                                    {
                                        author: '71207 謝宗翰',
                                        text: '我將中間的角色身後畫上了一顆超大的眼球,讓畫面看起來多了東西,也讓中間的人看起來更特別。在角色們身上加了許多惡魔元素是為了讓畫面更符合災難的情景,也讓觀眾更難去猜想兇手是誰?看起來好像都很可怕。女生的角色大多以貓為元素,融入我看的動漫風格變成獸人。'
                                    },
                                    {
                                        author: '71308 汪裕恩',
                                        text: '我的靈感是來自班上同學,我畫食物和桌子是因為想呈現在餐廳裡的感覺,因為主題是最後的晚餐,所以畫出了廚房,現在的城市越來越發達,所以我畫出電梯和窗戶外面的世界,為了呈現是誰背叛耶穌,我畫出一袋錢在他的手上,讓想知道兇手是誰的人比較好猜。'
                                    },
                                    {
                                        author: '71427 李昤蒽',
                                        text: '這幅畫的創作理念是「眼睛」,剛開始看《最後的晚餐》,我便注意到這幅畫的大面積都是深色系,而且氣氛是偏嚴肅的,因此我就聯想到「眼睛」,「眼睛」對我來說不僅僅是看物品的器官,更是展現圖中每個人的心情和想法,所以我在畫圖時曾增添許多眼睛的相關物品,希望更能展現裡面所表達的氣氛。'
                                    },
                                    {
                                        author: '71512 張祈惟',
                                        text: '窗戶我畫成三角形是因為那時距離聖誕節很近,想加一些聖誕節的元素,就設計了像聖誕樹的窗戶。牆上的畫是取自於《吶喊》、《蒙娜麗莎的微笑》、星月跟奇異果兄弟,時鐘上時針分針是以生日的月份跟日為靈感,分別是十點二十六分,衣服以不同顏色為搭配,想要色色分明。'
                                    },
                                    {
                                        author: '71613 何善納',
                                        text: '因為我在思考時想到了可以營造出 KTV 包廂的效果,所以用音響和迪斯可球來帶出更活潑的氣氛。大家會在遠處看到色彩繽紛、五光十色的迪斯可球。近看時會自然把目光轉移到正在播放的背景音樂,上面有著充滿聖誕氛圍與華麗裝飾的聖誕樹,也有 LED 燈圍繞在地板上的露營燈。可能會想,為什麼畫的如此華麗、五顏六色呢?明明是個瀰漫沈重氣氛的場合,與原作不一樣?但我想打破原始的氣氛,使我的畫作跟其他同學的不一樣,有自己的風格。迪斯可球是各種顏色,代表門徒的心情,但溫馨的背景音樂就像耶穌,十分平靜一樣。'
                                    },
                                    {
                                        author: '71723 曾沛暄',
                                        text: '我的構圖是以藤蔓、樹木和人物為主,表達生命的綻放與枯萎,呼應《最後的晚餐》一圖,在看似溫和的共餐中,蘊藏了一絲絲的惡意與背叛。我的作品是以黑白為主,在鉛筆上以橡皮擦擦出白色的部分,整個背景是全黑白,再次凸顯人物的部分。'
                                    },
                                    {
                                        author: '71825 鄧品彤',
                                        text: '我會想把這幅畫的背景畫成海底世界是因為在這幅畫中的情緒是緊張的感覺,在水族館的海底隧道那種很冷的感覺,跟這幅畫《最後的晚餐》很相似。在這幅畫有些門徒都在懷疑同伴,有些門徒在解釋,有各式各樣的情緒,而耶穌在正中間呈現出混亂中的一絲冷靜。'
                                    },
                                    {
                                        author: '72121 李尹珊',
                                        text: '我在畫《最後的晚餐》時,只想畫出最原始的版本,但畫完後又覺得太空了,所以多加了一隻龍。門徒和耶穌的衣服會畫成黑白是因為我比較想讓大家不要被他們吸引,背景是我花最多時間在上色的,希望大家多把焦點放在他們身上!'
                                    },
                                    {
                                        author: '72223 孫侑琦',
                                        text: '我認為《最後的晚餐》的中心人物是耶穌,所以我刻意將視線都集中在耶穌身上,例如:用亮暗的對比來強調耶穌的存在。而我畫作上的「貓天使」則是我的自創人物,用來表現教堂的「神聖」。'
                                    },
                                ]
                            }
                        }
                    }                 
                ]
            },
            {
                id: 'mona-lisa',
                title: '蒙娜麗莎的微笑',
                icon: 'Smile',
                subMenus: [
                    {
                        id: 'mona-analysis',
                        title: '畫作賞析',
                        content: {
                            title: '神秘的微笑與暈塗法',
                            type: 'text',
                            body: [
                                '同學們，我想問你們一個問題——你覺得這張畫有哪裡「特別」？是那個微笑？還是她的眼神、背景、還是整個氛圍？',
                                '沒錯，這幅畫就是世界上最有名的作品之一——達文西（Leonardo da Vinci）〈蒙娜麗莎〉，完成於約 1503–1506 年之間，是文藝復興盛期最具代表性的肖像畫。',
                                '先說說畫中的人：',
                                '畫中是一位坐著的女子，雙手交疊，臉上帶著淡淡的微笑。',
                                '她的身份其實有很多說法，但對我們來說，更重要的是——',
                                '這不只是肖像，而是一個「有生命」的人。',
                                '問學生：你覺得她的笑容是「開心」的？還是「神秘」的？',
                                '觀察她的表情與眼神：',
                                '仔細看，她的眼睛好像在看著你，無論你站在哪個角度，都感覺被注視著。',
                                '這是達文西運用光線與陰影的高超技巧——他使用一種叫 「暈塗法」（Sfumato） 的技術，',
                                '讓線條和顏色邊界變得柔和、漸層，不再有明顯的輪廓線。結果？畫面變得像活的，有呼吸、有思考。'
                            ],
                            image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/800px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg'
                        }
                    },
                    {
                        id: 'mona-creation',
                        title: '學生再創畫作及簡介文字',
                        content: {
                            title: '蒙娜麗莎變裝秀',
                            type: 'gallery',
                            images: [
                                { src: '502.jpg', desc: '小黃瓜美容面膜敷臉的蒙娜麗莎' },
                                { src: '503.jpg', desc: '同人作品蒙娜麗莎' },
                                { src: '504.jpg', desc: '日本藝術家風格蒙娜麗莎' },
                                { src: '505.jpg', desc: '穿著傳統和服和髮飾的蒙娜麗莎' },
                                { src: '506.jpg', desc: '動漫風蒙娜麗莎' },
                                { src: '507.jpg', desc: '貓咪大作戰蒙娜麗莎' }
                            ],
                            additionalContent: {
                                title: '學生創作理念',
                                items: [
                                    {
                                        author: '作者：90715蘇恩霈',
                                        text: '本作品以世界名畫《蒙娜麗莎》為靈感，結合我喜愛的遊戲《貓咪大作戰》，將遊戲中的貓咪角色轉化為蒙娜麗莎的形象。畫面中保留原作背景的復古山水風格，象徵經典藝術的歷史感；而主角貓咪則以現代簡約風呈現，線條單純、造型可愛，代表現代流行文化。透過古典與現代的結合，我希望表現不同時代藝術之間的對話，也讓名畫變得更親切、有趣。這幅作品不只是模仿經典，而是加入自己的想法，讓藝術與生活、遊戲產生新的連結。'
                                    },
                                    {
                                        author: '作者：90917周彥彤',
                                        text: '歐洲的義大利是文藝復興的搖籃，當時東西方貿易頻繁，文化交流十分興盛。本作品以此為出發點，將西方經典名畫《蒙娜麗莎》的神秘微笑，結合位於亞洲的日本傳統藝妓形象進行創作。畫中保留蒙娜麗莎沉靜而耐人尋味的神情，同時融入藝妓細緻的妝容與華麗的服裝特色，呈現東西方文化交會與碰撞的視覺效果。透過這樣的結合，我希望表現不同文化雖然背景不同，卻能相互融合，創造出全新的藝術感受。'
                                    },
                                    {
                                        author: '作者：90915陳卉喬',
                                        text: '本作品以世界名畫《蒙娜麗莎》為創作主題，將她的形象與90年代的流行風格結合，重新詮釋經典名畫。畫中保留蒙娜麗莎沉穩而神秘的表情，並在服裝設計上加入90年代盛行的粉色與碎鑽元素，展現當時流行文化的特色。同時搭配金屬材質與圓形耳環等佩飾，使整體造型更具現代感與時尚感。透過古典與流行元素的融合，我希望呈現出不同時代美感的對話，讓經典藝術以全新的樣貌走進現代生活，也讓觀者感受到藝術能隨著時代不斷創新與改變。'
                                    },
                                    {
                                        author: '作者：91014李明恩',
                                        text: '我是在輕鬆、愉悅的心情下完成這幅作品的，並沒有特別偉大的理想或崇高的使命，更像是一種單純的塗鴉與表達。我認為在不同的時空背景下，產生不同文化是一件很自然的事，而來自不同地區、擁有不同成長經驗的人，喜歡的事物也不會完全相同，甚至可能彼此衝突。這樣的想法也呈現在我的畫作中，結合了少部分現代日常元素與達文西的經典名畫。蒙娜麗莎曾引起世界的關注，而我相信藝術只要誕生就不會消失，文藝復興也不會只有一次。'
                                    },
                                    {
                                        author: '作者：90513高翎芮',
                                        text: '本作品以世界名畫《蒙娜麗莎》為靈感，將其改編成「膜娜麗莎」，巧妙結合美容面膜與藝術經典元素進行創作。畫中保留蒙娜麗莎具有辨識度的表情特徵，同時加入現代人熟悉的美容面膜，讓古典人物融入現代生活。這樣的轉換不僅增加畫面的趣味性，也象徵人們對美的追求不會因時代改變而消失。從文藝復興到現代社會，對美的欣賞方式雖然不同，但藝術始終與生活緊密相連。我希望透過這幅作品，讓經典名畫以輕鬆、有創意的方式被重新詮釋與欣賞。'
                                    }
                                ]
                            }
                        }
                    }
                ]
            },
            {
                id: 'mona-vr',
                title: 'VR體驗走進羅浮宮',
                icon: 'Glasses',
                content: {
                    title: '虛擬實境：與蒙娜麗莎面對面',
                    type: 'mixed',
                    body: '透過 VR 眼鏡，我們將教室瞬間變成法國羅浮宮的德農館。學生可以360度環視展廳，甚至可以「越過」防彈玻璃，近距離觀察畫作的裂紋與筆觸。',
                    image: '601.JPG', // VR Headset user
                    isVR: true,
                    vrLink: 'https://www.youtube.com/watch?v=GI7kO9PtB1k'
                }
            },
            {
                id: 'feedback',
                title: '活動回饋與分享',
                icon: 'MessageSquare',
                subMenus: [
                    {
                        id: 'feedback-lin',
                        title: '林桂禎老師：課程設計與省思',
                        content: {
                            title: '游於藝活動回饋與分享',
                            type: 'text',
                            image: '70101.jpg', // Art teacher/Classroom
                            body: [
                                '林桂禎老師',
                                '一、課程設計理念',
                                '本次參與「游於藝－文藝復興」活動，課程設計以經典藝術結合學生自我表達為核心。透過介紹文藝復興時期的藝術背景與李奧納多．達文西《蒙娜麗莎的微笑》，引導學生理解經典作品的文化價值與藝術特色，並鼓勵學生跳脫臨摹框架，重新詮釋名畫，將自身生活經驗、情感與想法融入創作，培養藝術鑑賞力、創造力與批判思考能力。',
                                '二、教學流程簡述',
                                '課程首先透過圖像與影片介紹文藝復興時代背景及《蒙娜麗莎》的構圖、表情與微笑的多元解讀，引發學生討論。接著說明創作任務，請學生以「重新創作蒙娜麗莎的微笑」為主題，自由加入個人元素，如情緒、時代特色或校園生活。創作過程中，教師進行個別指導與提問，引導學生思考作品意涵。最後安排作品分享與同儕回饋，讓學生練習表達與欣賞他人創作。',
                                '三、學生創作與學習回饋',
                                '學生普遍對經典名畫再創作表現高度興趣，作品內容多元，有的結合現代科技、表情符號，有的融入個人情緒與社會議題。多數學生表示，透過重新創作，更能理解蒙娜麗莎微笑的神秘性，也感受到藝術與自身生活的連結。在分享與討論中，學生能清楚說明創作理念，展現自信與觀察力。',
                                '四、教師個人省思',
                                '本次教學發現，當課程給予學生足夠創作空間時，能有效提升學習動機與參與度。未來可增加跨領域結合，如語文或歷史討論，加深學生理解；同時在時間安排上預留更多分享與回饋機會，使學生能更完整表達想法，讓藝術學習更具深度與溫度。'
                            ]
                        }
                    },
                    {
                        id: 'feedback-wang',
                        title: '王丞泰老師：AI 壓克力燈作畫',
                        content: {
                            title: '光影與算力的交織：文藝復興 AI 壓克力燈作畫教學心得',
                            type: 'text',
                            image: '70201.jpg', // Tech/Light
                            body: [
                                '王丞泰老師',
                                '一、 課程設計理念：經典美學與現代科技的共鳴',
                                '本次課程的核心理念在於「跨時空對話」，我們將十六世紀的文藝復興經典美學與二十一世紀最具突破性的 AI 繪圖技術相結合。這不僅是一場美術創作，更是一次生活科技的整合實踐。',
                                '設計初衷是希望學生透過 AI 繪圖軟體，將自己的容貌與文藝復興時期的名畫（如《蒙娜麗莎》、《維納斯的誕生》或《戴珍珠耳環的少女》）進行數位融合。隨後，我們進一步結合九年級生活科技課程中的「電路焊接」知能，引導學生親手組裝 LED 燈條。透過 LED 的穿透光源，增加壓克力畫作的色彩飽和度與亮度，使作品從平面的圖畫轉化為具有實用價值與現代感的工藝燈飾。',
                                '二、 教學流程簡述：從「魔法咒語」到「焊錫工藝」',
                                '教學過程分為三個層次遞進，確保學生能從理論認知轉化為實體作品：',
                                'AI 科技的探索與咒語練習： 課程起始於對人工智慧趨勢的介紹。我帶領學生認識不同的 AI 生圖軟體及其視覺效果差異，並重點教授如何撰寫精準的「魔法咒語」（Prompts）。為了後續壓克力填色的可行性，我特別指導學生在指令中加入「Q 版風格」、「簡單色塊」等關鍵字，確保生成的圖像結構清晰、適合手工臨摹。',
                                '壓克力繪製與色塊修煉： 學生將 AI 生成的個性化名畫圖案墊在壓克力板下，利用壓克力顏料進行分層填塗。這是一個耐心的挑戰，學生需經過數週反覆地填色與晾乾，利用壓克力顏料半透明的特性，在燈光照射下呈現如同彩繪玻璃般的層次感。',
                                '精密焊接與結構組裝： 最後階段進入生活科技的實作。學生需將 LED 燈條焊接至燈座電路中。由於市售燈座的內部空間極其狹小，焊接點精密，學生必須展現極高的專注力與穩定度，才能精確控制焊錫量，避免造成正負極短路。',
                                '三、 教師個人省思：在算力時代培養科技倫理',
                                '這次教學帶給我與學生極大的啟發。透過 AI 軟體，原本對繪畫自信不足的學生，也能創作出比例精準、風格強烈的作品（如將自己轉化為戴珍珠耳環的少女，呈現出細膩的頭巾色塊與神韻）。這種科技賦權極大地激發了學生的創作意願。',
                                '然而，作為教師，我也在課程中融入了深層的反思。在學生驚嘆於 AI 強大生圖能力的同時，我必須適時引導他們思考「科技倫理」議題。我們討論了 AI 對藝術原創性的定義，以及在深度偽造（Deepfake）技術日益成熟的今日，如何防範網路詐騙與保護個人隱私。',
                                '看到學生在光影閃爍的壓克力燈前露出滿足的笑容，我體會到：生活科技課不應只是枯燥的零件組裝，藝術課也不應只是傳統的繪圖。當我們把最新的 AI 科技作為工具，並以嚴謹的工藝技術將其落實為實體，教育才真正實現了「數位轉型」與「全人素養」的結合。這不僅是一盞燈的製作，更是點亮了學生對未來科技應用的好奇心與責任感。'
                            ]
                        }
                    },
                  {
                        id: 'feedback-he',
                        title: '何秭萱老師：穿越時空的餐桌',
                        content: {
                            title: '穿越時空的餐桌：當《最後的晚餐》遇見沉浸式雙語劇場',
                            type: 'text',
                            image: '70301.JPG', // Theater/Drama/Table
                            body: [
                                '何秭萱老師',
                                '在此次廣達游於藝的文藝復興展覽中，我嘗試將表演藝術課程與雙語教學結合，以達文西的經典名作《最後的晚餐》為核心，設計了一場跨越時空的沉浸式劇場體驗。課程的設計初衷，不單是讓學生欣賞畫作，而是希望透過「角色扮演」與「情境模擬」，帶領學生真正走進畫中，去揣摩十二門徒在聽聞耶穌預言遭背叛時的震驚與躁動，以及耶穌那份超然的冷靜與堅定。',
                                '教學流程的展開，始於對故事背景的探索。學生將十二門徒分組，利用 iPad 進行小組研究，深入挖掘每一位門徒的性格背景及在畫中的肢體語言。為了深化雙語學習，學生需為角色發想一句中文與一句英文台詞。特別的是，考量到本次展覽搭建了壯觀的聖母百花大教堂穹頂圓形投影，我大膽地將原作的一字長桌改為圓桌形式，並運用 360 度全景相機拍攝學生的行動劇。當演出結束，學生能立刻進入穹頂投影中，以身歷其境的視角觀看自己的演出，這種科技與藝術的結合，極大化了學習的即時回饋與震撼感。',
                                '在創作理念上，我著重於引導學生探討角色的內心動機，為何猶大選擇背叛？耶穌的平靜背後隱藏著什麼意涵？透過身歷其境的演繹，學生不再是旁觀者。課堂上準備了真實的麵包、紅酒（葡萄汁）以及考究的服裝，讓儀式感倍增。學生們對此興奮不已，回饋表示「彷彿真的在和耶穌共進晚餐，吃的是耶穌的肉、喝的是耶穌的血。」更有學生提到，雖然起初用英文發想台詞頗具挑戰，但在老師引導下，發現用英文似乎更能直觀地宣洩當下的情緒張力。',
                                '回首這段教學歷程，最讓我意想不到的感動，是這張「圓桌」竟成為了整個展覽的焦點。原先僅是課程設計的一環，卻因為佈置出的壯闊氛圍，吸引了所有人的目光。無論是校內的師生、參觀的小學生，甚至是家長，一走進展場便目不轉睛地圍繞著餐桌，好奇地詢問能否參與體驗。看著每一位坐上椅子的人，在閱讀完角色卡後，能瞬間投入情境，將千年前的經典場景栩栩如生地重現在眼前，那份全心投入的專注與演出的張力，成為了我身為教師最珍貴的收穫與感動。'
                            ]
                        }
                    },
                    {
                        id: 'feedback-hsu',
                        title: '許嫚真老師：五感齊發的藝術旅程',
                        content: {
                            title: '五感齊發的藝術旅程',
                            type: 'text',
                            image: '70401.jpg', // Sketching/Art
                            body: [
                                '許嫚真老師',
                                '一、課程設計理念：',
                                '讓藝術走進日常，藝術不應只是塵封在美術館裡的歷史脈絡，而是與學生生活經驗的延伸。本課程特別針對七年級生的特質，選擇了文藝復興經典巨作《最後的晚餐》作為核心。為了增加學生與畫作的對話，課程設計以「角色扮演」與「當代詮釋」為媒介，讓學生在角色扮演的情境中，縮短與名畫的距離感。',
                                '在學習目標上，以「一點透視」的觀察以及「素描明暗與色彩」的感官實踐。希望學生在學習技法的同時，仍能保有個人意識的發揮空間，讓經典構圖成為他們表達自我的舞台。',
                                '二、教師省思與回饋：',
                                '在艱澀中見證潛力，回顧課程設計之初，我深知《最後的晚餐》的再創作對國一生極具挑戰。「透視學」與「素描基礎」對於無相關訓練的七年級學生來說，往往是道高牆。然而，透過「步驟化引導」與尋找「消失點」的練習，我驚訝地發現，學生能逐漸掌握空間的規律，並在畫紙上建立起立體感，同時也有許多有想法的學生，掌握核心精神，運用創意打破框架，也讓我看見了學生身上無窮的潛力。',
                                '更令人動容的是學生的創意。雖然過程考驗不斷，但最終的作品表現令人驚艷！從人物神情的細膩刻畫，到背景環境的奇幻想像，學生們試著將自己與同學的生活情境與原作連結。在他們的筆下，經典人物擁有了新的生命力與個性，展現出相同題材在不同靈魂碰撞下，所產生的多變可能性。',
                                '三、結語：',
                                '感謝學校的精心策劃，讓學生不必遠行，在校園內就能近距離感受大師之作的震撼。藉由展場的多樣化規劃，學生從視覺的「穹頂藝術」、身體實踐的「行動藝術」，到科技結合的「VR體驗」，全面打開了五感。這不僅是一次美術作業的繳交，更是一場關於美學、技術與創意的深刻洗禮。'
                            ]
                        }
                    },
                    {
                        id: 'feedback-videos',
                        title: '師生訪談影音',
                        content: {
                            title: '活動回饋與分享 - 影音紀錄',
                            type: 'video-grid',
                            items: [
                                { 
                                    title: '老師訪談', 
                                    desc: '美感教育對學生觀察力的影響。',
                                    thumbnail: 'https://images.unsplash.com/photo-1544717297-fa95b6ee9643?q=80&w=800&auto=format&fit=crop',
                                    externalLink: 'https://www.youtube.com/'
                                },
                                { 
                                    title: '學生心得', 
                                    desc: '「扮演猶大的時候，我才真的理解那種焦慮。」',
                                    thumbnail: 'https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?q=80&w=800&auto=format&fit=crop',
                                    externalLink: 'https://www.youtube.com/'
                                }
                            ]
                        }
                    }
                ]
            },
           {
                id: 'full-record',
                title: '活動紀錄影片',
                icon: 'Play',
                externalLink: 'https://www.youtube.com/watch?v=ehi1peaqU50',
                content: {
                    title: '活動全紀錄',
                    type: 'text',
                    body: []
                }
            },
            {
                id: 'photos',
                title: '照片紀實',
                icon: 'Image',
                externalLink: 'https://photos.app.goo.gl/Bt4hsB62rDhem5KS6',
                content: {
                    title: '照片紀實',
                    type: 'text',
                    body: []
                }
            },
            {
                id: 'quiz',
                title: '觀展後的小測驗',
                icon: 'HelpCircle',
                content: {
                    type: 'quiz',
                    title: '文藝復興達人挑戰賽'
                }
            },
            {
                id: 'media',
                title: '媒體報導',
                icon: 'Newspaper',
                content: {
                    title: '各界媒體熱烈報導',
                    type: 'news-list',
                    items: [
                         { title: '民視新聞網：飛船穿梭蒙娜麗莎之窗！中正國中「穹頂玩藝」特展', source: '民視新聞', date: '2025.12.31', link: 'https://www.ftvnews.com.tw/news/detail/2025C31W0697' },
                        { title: 'yahoo!新聞：飛船穿梭蒙娜麗莎之窗！中正國中「穹頂玩藝」特展', source: 'yahoo!新聞', date: '2025.12.31', link: 'https://tw.news.yahoo.com/%E9%A3%9B%E8%88%B9%E7%A9%BF%E6%A2%AD%E8%92%99%E5%A8%9C%E9%BA%97%E8%8E%8E%E4%B9%8B%E7%AA%97-%E4%B8%AD%E6%AD%A3%E5%9C%8B%E4%B8%AD-%E7%A9%B9%E9%A0%82%E7%8E%A9%E8%97%9D-%E7%89%B9%E5%B1%95-102913966.html' },
                        { title: '國立教育廣播電台：穹頂玩藝～文藝復興特展', source: '國立教育廣播電台', date: '2026.1.1', link: 'https://www.ner.gov.tw/news/69561bbb005e540022d9ecd8' },
                        { title: '大豐新聞：漫遊文藝復興 中正國中穹頂玩藝特展', source: '大豐新聞', date: '2026.1.2', link: 'https://www.youtube.com/watch?v=7p27aklxq8w' }
                    ]
                }
            }
        ];

        // Quiz Data
        const quizQuestions = [
            {
                question: "文藝復興的發源地是哪個國家？",
                options: ["法國", "義大利", "英國", "西班牙"],
                correct: 1
            },
            {
                question: "《最後的晚餐》中，達文西使用了什麼技巧來突顯耶穌的主角地位？",
                options: ["暈塗法", "分離派", "單點透視法", "點描法"],
                correct: 2
            },
            {
                question: "聖母百花大教堂的巨大穹頂是由誰設計的？",
                options: ["米開朗基羅", "拉斐爾", "布魯內萊斯基", "達文西"],
                correct: 2
            },
            {
                question: "蒙娜麗莎臉部柔和的陰影效果，使用了哪種繪畫技法？",
                options: ["Sfumato (暈塗法)", "Chiaroscuro (明暗對照法)", "Impasto (厚塗法)", "Fresco (濕壁畫)"],
                correct: 0
            },
            {
                question: "「文藝復興 (Renaissance)」這個詞的原意是什麼？",
                options: ["創新", "重生", "革命", "延續"],
                correct: 1
            },
            {
                question: "本次特展中，學生使用什麼材料來復刻聖母百花大教堂的穹頂？",
                options: ["原木", "鋼筋水泥", "三角形紙板", "3D列印塑料"],
                correct: 2
            },
            {
                question: "下列哪一位大師 **不屬於** 「文藝復興美術三傑」？",
                options: ["達文西", "米開朗基羅", "拉斐爾", "波提切利"],
                correct: 3
            },
            {
                question: "在中正國中的特展中，觀看《蒙娜麗莎的微笑》結合了哪種科技體驗？",
                options: ["AR 擴增實境", "VR 虛擬實境", "AI 繪圖", "3D 列印"],
                correct: 1
            },
            {
                question: "《最後的晚餐》壁畫位於哪一座城市？",
                options: ["羅馬", "佛羅倫斯", "威尼斯", "米蘭"],
                correct: 3
            },
            {
                question: "本次策展主題「光影漫入游於藝」的下一句是？",
                options: ["校園充滿藝術風", "中正迎來新世紀", "中正迎來文藝興", "師生共創美好情"],
                correct: 2
            }
        ];

        // Components
        const SidebarItem = ({ item, isActive, isExpanded, onClick, onSubClick, activeSubId }) => {
            const Icon = Icons[item.icon] || Icons.BookOpen;
            
            return (
                <div className="mb-2">
                    <button 
                        onClick={() => onClick(item)}
                        className={`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-300 ${isActive ? 'bg-amber-700 text-white shadow-lg' : 'hover:bg-stone-200 text-stone-700'}`}
                    >
                        <div className="flex items-center gap-3">
                            <Icon />
                            <span className="font-medium tracking-wide">{item.title}</span>
                        </div>
                        {item.subMenus && (
                            <i data-lucide={isExpanded ? "chevron-down" : "chevron-right"}></i>
                        )}
                    </button>
                    
                    {/* Submenu */}
                    {item.subMenus && isExpanded && (
                        <div className="ml-4 mt-1 border-l-2 border-amber-200 pl-2 space-y-1 animate-[fadeIn_0.3s_ease-in-out]">
                            {item.subMenus.map(sub => (
                                <button
                                    key={sub.id}
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        onSubClick(item, sub);
                                    }}
                                    className={`w-full text-left p-2 text-sm rounded transition-colors ${activeSubId === sub.id ? 'bg-amber-100 text-amber-900 font-bold' : 'text-stone-500 hover:text-amber-800'}`}
                                >
                                    {sub.title}
                                </button>
                            ))}
                        </div>
                    )}
                </div>
            );
        };

        const QuizComponent = () => {
            // State to store shuffled questions
            const [questions, setQuestions] = useState([]);
            const [currentQ, setCurrentQ] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [selectedOption, setSelectedOption] = useState(null);

            // Initialize shuffled questions on mount
            useEffect(() => {
                setQuestions([...quizQuestions].sort(() => Math.random() - 0.5));
            }, []);

            const handleAnswer = (index) => {
                setSelectedOption(index);
                setTimeout(() => {
                    // Check answer against the current question in the shuffled array
                    if (index === questions[currentQ].correct) {
                        setScore(s => s + 1);
                    }
                    if (currentQ < questions.length - 1) {
                        setCurrentQ(q => q + 1);
                        setSelectedOption(null);
                    } else {
                        setShowResult(true);
                    }
                }, 800);
            };

            const resetQuiz = () => {
                setCurrentQ(0);
                setScore(0);
                setShowResult(false);
                setSelectedOption(null);
                // Re-shuffle questions on reset
                setQuestions([...quizQuestions].sort(() => Math.random() - 0.5));
            };

            // Don't render until questions are loaded/shuffled
            if (questions.length === 0) return null;

            if (showResult) {
                return (
                    <div className="text-center p-8 bg-white rounded-xl shadow-md border border-stone-200">
                        <i data-lucide="crown" className="w-16 h-16 mx-auto text-amber-500 mb-4"></i>
                        <h3 className="text-2xl font-bold mb-4 serif-font">測驗完成！</h3>
                        <p className="text-lg mb-6">你的得分是： <span className="text-amber-600 font-bold text-3xl">{score}</span> / {questions.length}</p>
                        <div className="text-stone-600 mb-8">
                            {score === questions.length ? "太厲害了！你是文藝復興大師！" : "再接再厲，文藝復興的奧秘等你探索！"}
                        </div>
                        <button onClick={resetQuiz} className="bg-amber-700 text-white px-6 py-2 rounded-full hover:bg-amber-800 transition">重新測驗</button>
                    </div>
                );
            }

            return (
                <div className="max-w-2xl mx-auto bg-white p-6 rounded-xl shadow-md border border-stone-200">
                    <div className="flex justify-between items-center mb-6 border-b pb-4">
                        <span className="text-stone-500 font-bold">Question {currentQ + 1}/{questions.length}</span>
                        <span className="bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-xs font-bold">Score: {score}</span>
                    </div>
                    <h3 className="text-xl font-bold mb-6 serif-font leading-relaxed">{questions[currentQ].question}</h3>
                    <div className="space-y-3">
                        {questions[currentQ].options.map((opt, idx) => (
                            <button
                                key={idx}
                                onClick={() => handleAnswer(idx)}
                                disabled={selectedOption !== null}
                                className={`w-full text-left p-4 rounded-lg border-2 transition-all ${
                                    selectedOption === idx 
                                        ? idx === questions[currentQ].correct 
                                            ? 'bg-green-100 border-green-500 text-green-800'
                                            : 'bg-red-100 border-red-500 text-red-800'
                                        : 'border-stone-100 hover:border-amber-300 hover:bg-amber-50'
                                }`}
                            >
                                {opt}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        const VideoGridItem = ({ video }) => {
            const [isPlaying, setIsPlaying] = useState(false);

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            });

            const handleClick = () => {
                if (video.externalLink) {
                    window.open(video.externalLink, '_blank');
                } else if (video.videoSrc) {
                    setIsPlaying(true);
                }
            };

            if (isPlaying && video.videoSrc) {
                // Check if it's a YouTube URL
                const isYoutube = video.videoSrc.includes('youtube.com/embed');

                return (
                    <div className="bg-stone-800 rounded-xl overflow-hidden shadow-lg h-full flex flex-col">
                        <div className="aspect-video bg-black">
                            {isYoutube ? (
                                <iframe 
                                    width="100%" 
                                    height="100%" 
                                    // Append autoplay to the URL (handling existing query params)
                                    src={`${video.videoSrc}&autoplay=1`} 
                                    title={video.title} 
                                    frameBorder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerPolicy="strict-origin-when-cross-origin" 
                                    allowFullScreen
                                ></iframe>
                            ) : (
                                <video 
                                    src={video.videoSrc} 
                                    controls 
                                    autoPlay 
                                    className="w-full h-full"
                                >
                                    您的瀏覽器不支援影片播放。
                                </video>
                            )}
                        </div>
                        <div className="p-4 bg-white flex-1 flex flex-col justify-between">
                            <div>
                                <h4 className="font-bold text-lg mb-1">{video.title}</h4>
                                <p className="text-stone-500 text-sm">{video.desc}</p>
                            </div>
                            <button 
                                onClick={() => setIsPlaying(false)}
                                className="mt-4 text-sm text-amber-700 hover:text-amber-900 underline self-start"
                            >
                                關閉影片
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="bg-stone-800 rounded-xl overflow-hidden shadow-lg h-full flex flex-col group cursor-pointer hover:shadow-2xl transition-all duration-300" onClick={handleClick}>
                    <div 
                        className="h-48 bg-black flex items-center justify-center relative overflow-hidden"
                    >
                        <div className="absolute inset-0 bg-cover bg-center opacity-70 group-hover:opacity-50 transition-opacity duration-500 group-hover:scale-110" style={{backgroundImage: `url(${video.thumbnail || 'https://images.unsplash.com/photo-1576016770956-debb63d92058?q=80&w=800&auto=format&fit=crop'})`}}></div>
                        {(video.videoSrc || video.externalLink) && (
                            <i data-lucide="play-circle" className="w-16 h-16 text-white opacity-90 group-hover:opacity-100 group-hover:scale-110 transition relative z-10 drop-shadow-lg"></i>
                        )}
                    </div>
                    <div className="p-4 bg-white flex-1 relative">
                         {/* Decorative line */}
                        <div className="absolute top-0 left-4 right-4 h-1 bg-amber-600 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        <h4 className="font-bold text-lg mb-1 text-stone-800 group-hover:text-amber-800 transition-colors">{video.title}</h4>
                        <p className="text-stone-500 text-sm">{video.desc}</p>
                    </div>
                </div>
            );
        };

        const ContentDisplay = ({ data }) => {
            // Check if data is null or undefined to prevent crash
            if (!data) return <div className="p-10 text-center text-stone-400">請選擇一個項目</div>;
            
            useEffect(() => {
               if (window.lucide) window.lucide.createIcons();
            }, [data]);

            return (
                <div className="fade-in max-w-4xl mx-auto pb-10">
                    <h2 className="text-3xl font-bold mb-6 text-amber-900 serif-font border-b-2 border-amber-200 pb-3">{data.title}</h2>
                    
                    {data.type === 'text' && (
                        <div className="bg-white p-6 rounded-xl shadow-sm border border-stone-100">
                            {data.image && <img src={data.image} alt={data.title} className="max-w-full h-auto max-h-[600px] mx-auto rounded-lg mb-6 shadow-md block" 
                             onError={(e) => {
                                        // Fallback just in case
                                        e.target.onerror = null; 
                                        e.target.src = 'https://images.unsplash.com/photo-1518998053901-5348d3969105?auto=format&fit=crop&q=80&w=800'; 
                                    }}
                            />}
                            <div className="prose prose-stone max-w-none text-lg leading-relaxed text-stone-700">
                                {data.body.map((p, i) => {
                                    // Advanced Text Styling for Renaissance Vibe
                                    
                                    // 1. Headers (Ends with colon, or specific keywords)
                                    const isHeader = p.match(/^[一二三四]、/) || p.endsWith('：') || p.includes('老師') || p === '達文西（Leonardo da Vinci）〈最後的晚餐〉';
                                    
                                    // 2. Questions (Interaction Box)
                                    const isQuestion = p.startsWith('問學生');

                                    // 3. Notes/Answers (Starts with parentheses)
                                    const isNote = p.startsWith('（');

                                    if (isHeader) {
                                        return (
                                            <h3 key={i} className="text-2xl font-bold text-amber-900 mt-8 mb-4 serif-font border-b border-amber-200 pb-2 flex items-center gap-2">
                                                <i data-lucide="feather" className="w-5 h-5 text-amber-600"></i>
                                                {p}
                                            </h3>
                                        );
                                    }

                                    if (isQuestion) {
                                        return (
                                            <div key={i} className="bg-amber-50 p-5 rounded-lg border-2 border-amber-100 my-6 shadow-sm relative overflow-hidden">
                                                <div className="absolute top-0 right-0 p-4 opacity-10">
                                                    <i data-lucide="help-circle" className="w-24 h-24 text-amber-900"></i>
                                                </div>
                                                <div className="relative z-10 flex gap-3">
                                                    <span className="font-bold text-amber-800 flex-shrink-0 bg-amber-200 px-2 py-1 rounded text-sm h-fit mt-1">互動提問</span>
                                                    <p className="font-medium text-amber-900 italic text-lg m-0">{p.replace('問學生：', '')}</p>
                                                </div>
                                            </div>
                                        );
                                    }

                                    if (isNote) {
                                        return <p key={i} className="mb-4 text-stone-500 text-base pl-4 border-l-2 border-stone-300 italic">{p}</p>;
                                    }

                                    return <p key={i} className="mb-4">{p}</p>;
                                })}
                            </div>
                        </div>
                    )}

                    {/* Updated photo-grid-2x2 layout with classical frames */}
                    {data.type === 'photo-grid-2x2' && (
                        <div className="bg-white p-6 rounded-xl shadow-sm border border-stone-100 flex flex-col gap-8">
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                                {data.images.map((imgSrc, idx) => (
                                    <div key={idx} className="relative group">
                                        <div className="classical-frame p-2 bg-white transform transition duration-300 hover:scale-105 hover:z-10 h-64 md:h-80 flex items-center justify-center">
                                             <img 
                                                src={imgSrc} 
                                                alt={`Dome Photo ${idx+1}`} 
                                                className="max-w-full max-h-full object-contain"
                                                onError={(e) => {
                                                    // Fallback just in case
                                                    e.target.onerror = null; 
                                                    e.target.src = 'https://images.unsplash.com/photo-1576016770956-debb63d92058?q=80&w=800&auto=format&fit=crop'; 
                                                }}
                                             />
                                        </div>
                                    </div>
                                ))}
                            </div>
                            <div className="prose prose-stone max-w-none text-lg leading-relaxed text-stone-700 bg-stone-50 p-6 rounded-lg border-l-4 border-amber-700">
                                <p>{data.body}</p>
                            </div>
                        </div>
                    )}

                    {/* Legacy video-vertical in case used elsewhere */}
                    {data.type === 'video-vertical' && (
                        <div className="bg-white p-6 rounded-xl shadow-sm border border-stone-100 flex flex-col gap-6">
                            <div className="w-full aspect-video rounded-lg shadow-md overflow-hidden bg-black">
                                <iframe 
                                    width="100%" 
                                    height="100%" 
                                    src={data.videoSrc} 
                                    title="YouTube video player" 
                                    frameBorder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                    referrerPolicy="strict-origin-when-cross-origin" 
                                    allowFullScreen
                                ></iframe>
                            </div>
                            <div className="prose prose-stone max-w-none text-lg leading-relaxed text-stone-700">
                                <p>{data.body}</p>
                            </div>
                        </div>
                    )}

                    {data.type === 'mixed' && (
                        <div className="bg-white p-6 rounded-xl shadow-sm border border-stone-100 flex flex-col md:flex-row gap-6">
                            <div className="md:w-1/2">
                                {data.video ? (
                                    <div className="w-full h-64 md:h-full rounded-lg shadow-md overflow-hidden bg-black">
                                        <iframe 
                                            className="w-full h-full"
                                            src={data.video} 
                                            title={data.title}
                                            frameBorder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                            allowFullScreen
                                        ></iframe>
                                    </div>
                                ) : (
                                    <img src={data.image} alt={data.title} className="w-full h-full object-cover rounded-lg shadow-md" 
                                    onError={(e) => {
                                                    // Fallback just in case
                                                    e.target.onerror = null; 
                                                    e.target.src = 'https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=800&auto=format&fit=crop'; 
                                                }}
                                    />
                                )}
                            </div>
                            <div className="md:w-1/2 flex flex-col justify-center">
                                <p className="text-lg leading-relaxed text-stone-700 mb-6">{data.body}</p>
                                {data.isVR && (
                                    <button 
                                        onClick={() => window.open(data.vrLink || 'https://www.youtube.com/watch?v=GI7kO9PtB1k', '_blank')}
                                        className="flex items-center justify-center gap-2 bg-indigo-600 text-white py-3 px-6 rounded-lg hover:bg-indigo-700 transition shadow-lg transform hover:-translate-y-1"
                                    >
                                        <i data-lucide="glasses"></i>
                                        啟動 VR 體驗模式
                                    </button>
                                )}
                            </div>
                        </div>
                    )}

                    {data.type === 'gallery' && (
                        <div>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
                                {data.images.map((img, i) => (
                                    <div key={i} className="group relative overflow-hidden rounded-xl shadow-md cursor-pointer bg-stone-200">
                                        <img src={img.src} alt={img.desc} className="w-full h-64 object-cover transition duration-500 group-hover:scale-110" 
                                        onError={(e) => {
                                                    // Fallback just in case
                                                    e.target.onerror = null; 
                                                    e.target.src = 'https://images.unsplash.com/photo-1518998053901-5348d3969105?auto=format&fit=crop&q=80&w=800'; 
                                                }}
                                        />
                                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-4">
                                            <p className="text-white font-medium border-l-4 border-amber-500 pl-2">{img.desc}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            {data.additionalContent && (
                                <div className="prose prose-stone max-w-none">
                                    <h3 className="text-2xl font-bold text-amber-900 serif-font mb-6 border-l-4 border-amber-600 pl-4">{data.additionalContent.title}</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        {data.additionalContent.items.map((item, i) => (
                                            <div key={i} className="bg-white p-6 rounded-lg shadow-sm border border-stone-100 hover:shadow-md transition">
                                                <h4 className="font-bold text-lg text-amber-800 mb-3 border-b border-amber-100 pb-2 flex items-center gap-2">
                                                    <i data-lucide="pen-tool" className="w-4 h-4 text-amber-600"></i>
                                                    {item.author}
                                                </h4>
                                                <p className="text-stone-600 leading-relaxed text-sm text-justify">{item.text}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    {data.type === 'video-grid' && (
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {data.items.map((video, i) => (
                                <VideoGridItem key={i} video={video} />
                            ))}
                        </div>
                    )}
                    
                    {data.type === 'news-list' && (
                        <div className="space-y-4">
                            {data.items.map((item, i) => (
                                <div 
                                    key={i} 
                                    onClick={() => window.open(item.link, '_blank')}
                                    className="bg-white p-6 rounded-xl shadow-sm border border-stone-100 hover:shadow-md transition cursor-pointer flex justify-between items-center group"
                                >
                                    <div className="flex-1 pr-4">
                                        <h4 className="font-bold text-lg text-amber-900 group-hover:text-amber-700 mb-2 leading-tight">{item.title}</h4>
                                        <p className="text-stone-500 text-sm flex items-center gap-2">
                                            <i data-lucide="newspaper" className="w-4 h-4"></i>
                                            {item.source} | {item.date}
                                        </p>
                                    </div>
                                    <div className="text-amber-800 opacity-50 group-hover:opacity-100 group-hover:scale-110 transition">
                                        <i data-lucide="chevron-right" className="w-6 h-6"></i>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}

                    {data.type === 'quiz' && <QuizComponent />}
                </div>
            );
        };

        const App = () => {
            const [activeId, setActiveId] = useState('concept');
            const [activeSubId, setActiveSubId] = useState(null);
            const [expandedMenu, setExpandedMenu] = useState('cathedral');
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [visitCount, setVisitCount] = useState(1520);

            // Effect for counting visits
            useEffect(() => {
                const storedCount = localStorage.getItem('renaissance_visit_count');
                // If stored, use it + 1, else start at 1520 (Renaissance vibe)
                let newCount = storedCount ? parseInt(storedCount, 10) + 1 : 1520;
                setVisitCount(newCount);
                localStorage.setItem('renaissance_visit_count', newCount);
                
                // Init icons
                if (window.lucide) window.lucide.createIcons();
            }, []);

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [activeId, activeSubId, expandedMenu, mobileMenuOpen]);

            const handleMenuClick = (item) => {
                if (item.externalLink) {
                    window.open(item.externalLink, '_blank');
                    return;
                }

                if (item.subMenus) {
                    setExpandedMenu(expandedMenu === item.id ? null : item.id);
                    // Automatically select first sub-item if not already selected
                    if (!activeSubId || !item.subMenus.find(sub => sub.id === activeSubId)) {
                        setActiveSubId(item.subMenus[0].id);
                        setActiveId(item.id);
                    }
                } else {
                    setActiveId(item.id);
                    setActiveSubId(null);
                    setMobileMenuOpen(false);
                }
            };

            const handleSubMenuClick = (parent, sub) => {
                setActiveId(parent.id);
                setActiveSubId(sub.id);
                setMobileMenuOpen(false);
            };

            // Determine content to show
            const activeItem = menuData.find(item => item.id === activeId);
            let displayContent = activeItem?.content;

            if (activeItem?.subMenus && activeSubId) {
                const subItem = activeItem.subMenus.find(sub => sub.id === activeSubId);
                if (subItem) displayContent = subItem.content;
            }

            return (
                <div className="flex flex-col md:flex-row h-screen overflow-hidden">
                    
                    {/* Mobile Header */}
                    <div className="md:hidden bg-amber-900 text-white p-4 flex justify-between items-center z-50 shadow-md">
                        <span className="font-bold text-xl serif-font flex items-center gap-2">
                             <i data-lucide="feather" className="w-5 h-5"></i>
                             遊於藝
                        </span>
                        <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                            <i data-lucide={mobileMenuOpen ? "x" : "menu"}></i>
                        </button>
                    </div>

                    {/* Sidebar / Navigation */}
                    <nav className={`
                        fixed inset-0 z-40 bg-stone-100 transform transition-transform duration-300 ease-in-out
                        md:relative md:translate-x-0 md:w-80 md:block border-r border-amber-200
                        ${mobileMenuOpen ? 'translate-x-0 top-14' : '-translate-x-full md:top-0'}
                        flex flex-col
                    `}>
                        <div className="p-6 flex-1 overflow-y-auto">
                            <h1 className="hidden md:block text-2xl font-bold text-amber-900 mb-8 serif-font border-b-2 border-amber-800 pb-4">
                                遊於藝<br/>
                                <span className="text-lg font-normal text-amber-700">文藝復興在中正</span>
                            </h1>

                            <div className="space-y-1">
                                {menuData.map(item => (
                                    <SidebarItem 
                                        key={item.id} 
                                        item={item} 
                                        isActive={activeId === item.id}
                                        isExpanded={expandedMenu === item.id}
                                        activeSubId={activeSubId}
                                        onClick={handleMenuClick}
                                        onSubClick={handleSubMenuClick}
                                    />
                                ))}
                            </div>
                        </div>

                        {/* Visitor Counter */}
                        <div className="p-6 bg-stone-200 border-t border-amber-200 text-center">
                            <p className="text-stone-500 text-xs mb-2 uppercase tracking-wider">Visitor Count</p>
                            <div className="inline-block bg-stone-800 text-amber-100 px-4 py-2 rounded font-mono text-lg shadow-inner tracking-widest border border-amber-600">
                                {visitCount.toLocaleString()}
                            </div>
                        </div>
                    </nav>

                    {/* Main Content Area */}
                    <main className="flex-1 bg-[#f7f5f0] overflow-y-auto relative w-full">
                        {/* Decorative Background Element */}
                        <div className="absolute top-0 right-0 w-64 h-64 bg-amber-500 opacity-5 rounded-bl-full pointer-events-none"></div>
                        
                        <div className="p-6 md:p-10 min-h-full flex flex-col">
                            <ContentDisplay data={displayContent} />
                            
                            {/* Footer */}
                            <div className="mt-auto pt-12 border-t border-stone-300 text-center text-stone-500 text-sm">
                                <p>© 2025 新北市中正國民中學 | 藝術與人文領域 | 網頁設計：C.Kuo | 版本：Ver1.15 2026.1.25</p>
                            </div>
                        </div>
                    </main>

                    {/* Mobile Overlay */}
                    {mobileMenuOpen && (
                        <div 
                            className="fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden"
                            onClick={() => setMobileMenuOpen(false)}
                        ></div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
